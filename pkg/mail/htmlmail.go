package mail

import (
	"fmt"
	"github.com/joho/godotenv"
	"os"
)

// SendHTMLMail –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTML-–ø–∏—Å—å–º–æ
func SendHTMLMail(to string, subject, htmlContent string) error {

	godotenv.Load()

	cfg := NewConfig()

	body := "<table class=\"wrapper_mr_css_attr\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"" +
		" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; background-color: rgb(41, 41, 41) !important; margin: 0px; padding: 0px; width: 100%;\">\n<tbody style=\"border-color: rgb(255, 255, 255) !important;\"><tr style=\"border-color: rgb(255, 255, 255) !important;\">\n<td align=\"center\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; border-color: rgb(35, 35, 35) !important;\">\n<table class=\"content_mr_css_attr\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; margin: 0px; padding: 0px; width: 100%; border-color: rgb(255, 255, 255) !important;\">\n<tbody style=\"border-color: rgb(255, 255, 255) !important;\"><tr style=\"border-color: rgb(255, 255, 255) !important;\">\n    <td class=\"header_mr_css_attr\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; padding: 25px 0px; text-align: center; border-color: rgb(35, 35, 35) !important;\">\n        <a href=\"http://localhost\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; color: rgb(205, 205, 205) !important; font-size: 19px; font-weight: bold; text-decoration: none; display: inline-block;\" target=\"_blank\" rel=\" noopener noreferrer\">\n                            –ú–ú–û –ê–Ω–∞–ª–∏—Ç–∏–∫—Å\n                    </a>\n    </td>\n</tr>\n\n\n<tr style=\"border-color: rgb(255, 255, 255) !important;\">\n<td class=\"body_mr_css_attr\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; background-color: rgb(41, 41, 41) !important; margin: 0px; padding: 0px; width: 100%; border-color: rgb(61, 61, 61) !important;\">\n<table class=\"inner-body_mr_css_attr\" align=\"center\" width=\"570\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; background-color: rgb(35, 35, 35) !important; margin: 0px auto; padding: 0px; width: 570px; border-radius: 49px;\">\n\n<tbody style=\"border-color: rgb(255, 255, 255) !important;\"><tr style=\"border-color: rgb(255, 255, 255) !important;\">\n<td class=\"content-cell_mr_css_attr\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; max-width: 100vw; padding: 32px; border-color: rgb(35, 35, 35) !important;\">\n" +
		"<h1 style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, " +
		"BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, " +
		"&quot;Segoe UI Symbol&quot;; color: rgb(205, 205, 205) !important; font-weight: bold; margin-top: 0px; text-align: left; font-size: 34px;\">" +
		subject +
		"üî•üî• </h1>\n<p style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px; line-height: 1.5em; margin-top: 0px; text-align: left; border-color: rgb(35, 35, 35) !important;\">" +
		htmlContent +
		"</p>\n<p style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px; line-height: 1.5em; margin-top: 0px; text-align: left; border-color: rgb(35, 35, 35) !important;\">–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—à –ø—Ä–æ–¥—É–∫—Ç!<br style=\"border-color: rgb(35, 35, 35) !important;\">\n" +
		os.Getenv("APP_NAME") + "</p>\n\n\n\n</td>\n</tr>\n</tbody></table>\n</td>\n</tr>\n\n<tr style=\"border-color: rgb(255, 255, 255) !important;\">\n<td style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; border-color: rgb(35, 35, 35) !important;\">\n<table class=\"footer_mr_css_attr\" align=\"center\" width=\"570\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; margin: 0px auto; padding: 0px; text-align: center; width: 570px; border-color: rgb(255, 255, 255) !important;\">\n<tbody style=\"border-color: rgb(255, 255, 255) !important;\"><tr style=\"border-color: rgb(255, 255, 255) !important;\">\n<td class=\"content-cell_mr_css_attr\" align=\"center\" style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; max-width: 100vw; padding: 32px; border-color: rgb(35, 35, 35) !important;\">\n<p style=\"box-sizing: border-box; font-family: Helvetica, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; line-height: 1.5em; margin-top: 0px; color: rgb(176, 173, 197); font-size: 12px; text-align: center; border-color: rgb(35, 35, 35) !important;\">¬© " +
		"2025 " + os.Getenv("APP_NAME") + ". All rights reserved." +
		"</p>\n\n</td>\n</tr>\n</tbody></table>\n</td>\n</tr>\n</tbody></table>\n</td>\n</tr>\n</tbody></table>"

	err := cfg.SendMail(to, subject, body)
	if err != nil {
		return fmt.Errorf("failed to send HTML mail: %w", err)
	}

	return nil
}
